<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZAXS PROTOCOL v4.0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0a0a0a;
            color: #f0f0f0;
            overflow-x: hidden;
            height: 100vh;
        }

        /* BOOTING SCREEN - MERAH */
        #booting {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .boot-logo {
            font-family: 'Courier New', monospace;
            font-size: 1.5rem;
            color: #ff0000;
            text-shadow: 0 0 5px #ff0000;
            margin-bottom: 1.2rem;
            letter-spacing: 1px;
        }

        .boot-bar {
            width: 250px;
            height: 3px;
            background: #333;
            border-radius: 1px;
            overflow: hidden;
            margin-bottom: 0.8rem;
        }

        .boot-fill {
            height: 100%;
            background: #ff0000;
            width: 0%;
            transition: width 0.3s;
        }

        .boot-text {
            font-size: 0.8rem;
            color: #aaa;
            text-align: center;
            max-width: 300px;
        }

        /* LOGIN SCREEN */
        #loginScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 9998;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .login-container {
            width: 90%;
            max-width: 400px;
            background: rgba(30, 30, 40, 0.95);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid #ff0000;
        }

        .login-header {
            background: rgba(255, 0, 0, 0.2);
            padding: 1.2rem;
            text-align: center;
            border-bottom: 1px solid #ff0000;
        }

        .login-header h2 {
            color: #ff0000;
            font-size: 1.3rem;
        }

        .login-body {
            padding: 1.5rem;
        }

        .input-group {
            margin-bottom: 1rem;
        }

        .input-group label {
            display: block;
            margin-bottom: 0.3rem;
            color: #ccc;
            font-size: 0.9rem;
        }

        .input-group input {
            width: 100%;
            padding: 0.7rem;
            background: #222;
            border: 1px solid #ff0000;
            border-radius: 5px;
            color: #fff;
            font-size: 0.9rem;
        }

        .btn {
            display: block;
            width: 100%;
            padding: 0.8rem;
            background: #ff0000;
            border: none;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
            text-align: center;
            margin-top: 0.5rem;
        }

        .btn:hover {
            background: #ff3333;
            transform: translateY(-1px);
        }

        .btn:active {
            transform: translateY(0);
        }

        .login-msg {
            margin-top: 0.8rem;
            text-align: center;
            color: #ff5555;
            font-size: 0.8rem;
            min-height: 16px;
        }

        .login-links {
            margin-top: 1rem;
            text-align: center;
            font-size: 0.8rem;
            color: #888;
        }

        .login-links a {
            color: #ff5555;
            text-decoration: none;
            margin: 0 0.3rem;
        }

        .login-links a:hover {
            text-decoration: underline;
        }

        /* MAIN APP */
        #app {
            display: none;
            height: 100vh;
            position: relative;
        }

        /* HEADER */
        .header {
            background: rgba(20, 20, 30, 0.95);
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 1rem;
            border-bottom: 1px solid #ff0000;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left, .header-right {
            display: flex;
            align-items: center;
        }

        .header-btn {
            background: none;
            border: 1px solid #ff0000;
            color: #ff0000;
            width: 36px;
            height: 36px;
            border-radius: 5px;
            margin: 0 0.2rem;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .header-btn:hover {
            background: rgba(255, 0, 0, 0.1);
        }

        .logo {
            font-family: monospace;
            color: #ff0000;
            font-size: 1.2rem;
            margin-left: 0.5rem;
            font-weight: bold;
        }

        .datetime {
            margin-left: 0.8rem;
            font-size: 0.8rem;
            color: #ff5555;
            font-family: monospace;
        }

        .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff0000;
            color: white;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            font-size: 0.6rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* SIDEBAR */
        .sidebar {
            position: fixed;
            top: 50px;
            left: -250px;
            width: 240px;
            height: calc(100% - 50px);
            background: rgba(30, 30, 40, 0.98);
            z-index: 99;
            transition: left 0.3s;
            overflow-y: auto;
            padding: 1rem;
            border-right: 1px solid #ff0000;
        }

        .sidebar.open {
            left: 0;
        }

        .sidebar-title {
            color: #ff0000;
            margin-bottom: 1rem;
            font-size: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .sidebar-item {
            padding: 0.7rem;
            margin-bottom: 0.4rem;
            background: rgba(50, 50, 60, 0.5);
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: all 0.2s;
            color: #ccc;
            font-size: 0.9rem;
        }

        .sidebar-item:hover {
            background: rgba(255, 0, 0, 0.1);
            color: #fff;
        }

        .sidebar-item i {
            margin-right: 0.7rem;
            color: #ff5555;
            width: 18px;
            text-align: center;
        }

        /* MAIN CONTENT */
        .main-content {
            padding: 1rem;
            height: calc(100% - 110px);
            overflow-y: auto;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* DASHBOARD */
        .page-title {
            color: #ff0000;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .card {
            background: rgba(40, 40, 50, 0.8);
            border-radius: 8px;
            padding: 1rem;
            border: 1px solid #ff0000;
        }

        .card-title {
            color: #ff0000;
            margin-bottom: 0.6rem;
            font-size: 0.9rem;
            border-bottom: 1px solid #333;
            padding-bottom: 0.4rem;
        }

        .card-content {
            color: #ccc;
            line-height: 1.4;
            font-size: 0.9rem;
        }

        /* CHAT SYSTEM */
        .chat-container {
            height: 65vh;
            display: flex;
            flex-direction: column;
            background: rgba(30, 30, 40, 0.9);
            border-radius: 8px;
            overflow: hidden;
        }

        .chat-header {
            background: rgba(255, 0, 0, 0.2);
            padding: 0.8rem;
            color: white;
            border-bottom: 1px solid #ff0000;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 0.8rem;
            background: rgba(20, 20, 30, 0.8);
        }

        .message {
            margin-bottom: 0.6rem;
            padding: 0.5rem;
            border-radius: 6px;
            max-width: 85%;
            word-wrap: break-word;
            font-size: 0.85rem;
        }

        .message.sent {
            background: rgba(255, 0, 0, 0.2);
            margin-left: auto;
            border: 1px solid #ff5555;
        }

        .message.received {
            background: rgba(50, 50, 60, 0.8);
            margin-right: auto;
            border: 1px solid #555;
        }

        .message .sender {
            font-weight: bold;
            color: #ff5555;
            font-size: 0.75rem;
            margin-bottom: 0.2rem;
        }

        .message .time {
            font-size: 0.65rem;
            color: #888;
            float: right;
            margin-left: 0.5rem;
        }

        .chat-input-area {
            display: flex;
            padding: 0.8rem;
            background: rgba(40, 40, 50, 0.9);
            border-top: 1px solid #ff0000;
        }

        .chat-input {
            flex: 1;
            padding: 0.7rem;
            background: #222;
            border: 1px solid #ff0000;
            border-radius: 5px;
            color: white;
            font-size: 0.9rem;
        }

        .chat-send {
            background: #ff0000;
            color: white;
            border: none;
            padding: 0 1.2rem;
            margin-left: 0.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        /* MARKETPLACE */
        .market-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
        }

        .market-item {
            background: rgba(50, 50, 60, 0.8);
            border-radius: 8px;
            padding: 1rem;
            border: 1px solid #ff0000;
            transition: all 0.2s;
            cursor: pointer;
        }

        .market-item:hover {
            background: rgba(255, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .market-name {
            color: #fff;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .market-price {
            color: #ff0000;
            font-size: 1rem;
            font-weight: bold;
        }

        .market-days {
            font-size: 0.8rem;
            color: #aaa;
            margin-top: 0.3rem;
        }

        /* SYSTEM MONITOR */
        .monitor-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .monitor-item {
            background: rgba(40, 40, 50, 0.8);
            border-radius: 8px;
            padding: 0.8rem;
            border: 1px solid #ff0000;
        }

        .monitor-label {
            color: #aaa;
            font-size: 0.8rem;
            margin-bottom: 0.3rem;
        }

        .monitor-value {
            color: #ff0000;
            font-size: 1.2rem;
            font-family: monospace;
        }

        .monitor-bar {
            height: 8px;
            background: #333;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 0.4rem;
        }

        .monitor-fill {
            height: 100%;
            background: #ff0000;
            width: 50%;
        }

        /* BOTTOM NAV */
        .nav-bottom {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60px;
            background: rgba(20, 20, 30, 0.95);
            display: flex;
            justify-content: space-around;
            align-items: center;
            border-top: 1px solid #ff0000;
            z-index: 100;
        }

        .nav-item {
            flex: 1;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #888;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.8rem;
        }

        .nav-item.active {
            color: #ff0000;
            background: rgba(255, 0, 0, 0.1);
        }

        .nav-item i {
            font-size: 1rem;
            margin-bottom: 0.2rem;
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: rgba(30, 30, 40, 0.95);
            padding: 1.2rem;
            border-radius: 8px;
            width: 90%;
            max-width: 400px;
            border: 1px solid #ff0000;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .modal-title {
            color: #ff0000;
            font-size: 1rem;
        }

        .close-modal {
            background: #ff5555;
            color: white;
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 0.8rem;
        }

        /* SCROLLBAR */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #222;
        }

        ::-webkit-scrollbar-thumb {
            background: #ff0000;
            border-radius: 3px;
        }

        /* UTILITY */
        .text-center { text-align: center; }
        .mt-1 { margin-top: 0.5rem; }
        .mb-1 { margin-bottom: 0.5rem; }
        .d-none { display: none; }
        .d-block { display: block; }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            .market-grid {
                grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
            }
            .monitor-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .chat-container {
                height: 60vh;
            }
        }
    </style>
</head>
<body>
    <!-- BOOTING SCREEN -->
    <div id="booting">
        <div class="boot-logo">ZAXS PROTOCOL</div>
        <div class="boot-bar">
            <div class="boot-fill" id="bootFill"></div>
        </div>
        <div class="boot-text" id="bootText">Initializing system...</div>
    </div>

    <!-- LOGIN SCREEN -->
    <div id="loginScreen">
        <div class="login-container">
            <div class="login-header">
                <h2>ZAXS SYSTEM LOGIN</h2>
            </div>
            <div class="login-body">
                <div class="input-group">
                    <label>Username</label>
                    <input type="text" id="loginUsername" placeholder="Enter username">
                </div>
                <div class="input-group">
                    <label>Password</label>
                    <input type="password" id="loginPassword" placeholder="Enter password">
                </div>
                <button class="btn" id="btnLogin">LOGIN</button>
                <div class="login-msg" id="loginMsg"></div>
                <div class="login-links">
                    <a href="#" id="showInfo">System Info</a>
                </div>
            </div>
        </div>
    </div>

    <!-- MAIN APP -->
    <div id="app">
        <!-- HEADER -->
        <div class="header">
            <div class="header-left">
                <button class="header-btn" id="menuToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="logo">ZAXS</div>
                <div class="datetime" id="headerTime">00:00:00</div>
            </div>
            <div class="header-right">
                <button class="header-btn" id="notifToggle">
                    <i class="fas fa-bell"></i>
                    <span class="badge d-none" id="notifBadge">0</span>
                </button>
                <button class="header-btn" id="userToggle">
                    <i class="fas fa-user"></i>
                </button>
            </div>
        </div>

        <!-- SIDEBAR -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-title">
                <span>MENU</span>
                <span id="userRoleDisplay">USER</span>
            </div>
            <div class="sidebar-item" data-page="dashboard">
                <i class="fas fa-home"></i> Dashboard
            </div>
            <div class="sidebar-item" data-page="chatGlobal">
                <i class="fas fa-globe"></i> Chat Global
            </div>
            <div class="sidebar-item" data-page="chatPrivate">
                <i class="fas fa-comment"></i> Chat Private
            </div>
            <div class="sidebar-item" data-page="virtualPhone">
                <i class="fas fa-phone"></i> Virtual Phone
            </div>
            <div class="sidebar-item" data-page="systemMonitor">
                <i class="fas fa-desktop"></i> System Monitor
            </div>
            <div class="sidebar-item" data-page="marketplace">
                <i class="fas fa-store"></i> Marketplace
            </div>
            <div class="sidebar-item" data-page="onlineUsers">
                <i class="fas fa-users"></i> Online Users
            </div>
            <div class="sidebar-item" data-page="tools">
                <i class="fas fa-tools"></i> Tools
            </div>
            <div class="sidebar-item" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i> Logout
            </div>
            <div class="sidebar-item" style="margin-top: 1rem; font-size: 0.7rem; color: #888;">
                <i class="fas fa-info-circle"></i> v4.0 | All Systems Active
            </div>
        </div>

        <!-- MAIN CONTENT -->
        <div class="main-content" id="mainContent">
            <!-- DASHBOARD -->
            <div class="page active" id="pageDashboard">
                <h2 class="page-title">Dashboard</h2>
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-title">User Information</div>
                        <div class="card-content" id="userInfo">
                            Loading user data...
                     </div>
                    </div>
                    <div class="card">
                        <div class="card-title">System Status</div>
                        <div class="card-content">
                            <div>Online Users: <span id="onlineCount">0</span></div>
                            <div>Messages Today: <span id="messageCount">0</span></div>
                            <div>System Uptime: <span id="uptime">00:00</span></div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-title">Quick Actions</div>
                        <div class="card-content">
                            <button class="btn" onclick="showPage('chatGlobal')" style="margin-bottom: 0.5rem; padding: 0.5rem; font-size: 0.8rem;">
                                Open Global Chat
                            </button>
                            <button class="btn" onclick="showPage('virtualPhone')" style="padding: 0.5rem; font-size: 0.8rem;">
                                Virtual Phone
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card mt-1">
                    <div class="card-title">Important Links</div>
                    <div class="card-content">
                        <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                            <a href="https://whatsapp.com/channel/0029VbCCE4FBKfi19WrVvs3X" target="_blank" style="color: #ff5555; text-decoration: none; font-size: 0.8rem;">
                                <i class="fab fa-whatsapp"></i> Testimoni Channel
                            </a>
                            <a href="https://chat.whatsapp.com/KyzVolbKSDKBriKGJBeZhx?mode=gi_t" target="_blank" style="color: #ff5555; text-decoration: none; font-size: 0.8rem;">
                                <i class="fab fa-whatsapp"></i> Info Group
                            </a>
                            <a href="https://whatsapp.com/channel/0029Vb6t8q48V0tq6SkOxw2g" target="_blank" style="color: #ff5555; text-decoration: none; font-size: 0.8rem;">
                                <i class="fab fa-whatsapp"></i> APK Bug Channel
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CHAT GLOBAL -->
            <div class="page" id="pageChatGlobal">
                <h2 class="page-title">Global Chat</h2>
                <div class="chat-container">
                    <div class="chat-header">
                        <h3 style="font-size: 0.9rem; margin: 0;">Global Chat Room - Online: <span id="chatOnlineCount">0</span></h3>
                    </div>
                    <div class="chat-messages" id="chatGlobalMessages">
                        <div class="message received">
                            <div class="sender">System</div>
                            Welcome to ZAXS Global Chat!
                            <div class="time">00:00</div>
                        </div>
                    </div>
                    <div class="chat-input-area">
                        <input type="text" class="chat-input" id="chatGlobalInput" placeholder="Type message...">
                        <button class="chat-send" id="chatGlobalSend">Send</button>
                    </div>
                </div>
            </div>

            <!-- CHAT PRIVATE -->
            <div class="page" id="pageChatPrivate">
                <h2 class="page-title">Private Chat</h2>
                <div class="dashboard-grid">
                    <div class="card" style="grid-column: span 1;">
                        <div class="card-title">Online Users</div>
                        <div class="card-content" id="privateUsersList">
                            Loading users...
                        </div>
                    </div>
                    <div class="card" style="grid-column: span 2;">
                        <div class="card-title">Chat</div>
                        <div class="chat-container" style="height: 50vh;">
                            <div class="chat-header">
                                <h3 style="font-size: 0.9rem; margin: 0;" id="privateChatTitle">Select a user to chat</h3>
                            </div>
                            <div class="chat-messages" id="chatPrivateMessages">
                                <!-- Private messages will appear here -->
                            </div>
                            <div class="chat-input-area">
                                <input type="text" class="chat-input" id="chatPrivateInput" placeholder="Select user first..." disabled>
                                <button class="chat-send" id="chatPrivateSend" disabled>Send</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIRTUAL PHONE -->
            <div class="page" id="pageVirtualPhone">
                <h2 class="page-title">Virtual Phone System</h2>
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-title">Your Virtual Number</div>
                        <div class="card-content">
                            <div style="font-size: 1.2rem; color: #ff0000; font-family: monospace; margin: 0.5rem 0; padding: 0.5rem; background: rgba(0,0,0,0.3); border-radius: 5px; text-align: center;" id="virtualNumberDisplay">
                                Generating...
                            </div>
                            <button class="btn" id="generatePhoneBtn" style="padding: 0.6rem;">
                                <i class="fas fa-sync-alt"></i> Generate New Number
                            </button>
                            <div class="mt-1" style="font-size: 0.8rem; color: #888;">
                                Format: 62XXXXXXXXXXX (13 digits)
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-title">Phone Verification</div>
                        <div class="card-content">
                            <div style="margin-bottom: 0.5rem;">
                                Status: <span id="phoneStatus" style="color: #00ff00;">Active</span>
                            </div>
                            <div style="margin-bottom: 0.5rem;">
                                Verified: <span id="phoneVerified" style="color: #00ff00;">Yes</span>
                            </div>
                            <div>
                                Created: <span id="phoneCreated">Today</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SYSTEM MONITOR -->
            <div class="page" id="pageSystemMonitor">
                <h2 class="page-title">System Monitor</h2>
                <div class="monitor-grid">
                    <div class="monitor-item">
                        <div class="monitor-label">CPU Usage</div>
                        <div class="monitor-value" id="cpuValue">0%</div>
                        <div class="monitor-bar">
                            <div class="monitor-fill" id="cpuBar"></div>
                        </div>
                    </div>
                    <div class="monitor-item">
                        <div class="monitor-label">Memory</div>
                        <div class="monitor-value" id="memoryValue">0%</div>
                        <div class="monitor-bar">
                            <div class="monitor-fill" id="memoryBar"></div>
                        </div>
                    </div>
                    <div class="monitor-item">
                        <div class="monitor-label">Network</div>
                        <div class="monitor-value" id="networkValue">0 KB/s</div>
                        <div class="monitor-bar">
                            <div class="monitor-fill" id="networkBar"></div>
                        </div>
                    </div>
                    <div class="monitor-item">
                        <div class="monitor-label">Storage</div>
                        <div class="monitor-value" id="storageValue">0%</div>
                        <div class="monitor-bar">
                            <div class="monitor-fill" id="storageBar"></div>
                        </div>
                    </div>
                </div>
                <div class="card mt-1">
                    <div class="card-title">System Logs</div>
                    <div class="card-content">
                        <div style="max-height: 200px; overflow-y: auto;" id="systemLogs">
                            <div style="padding: 0.3rem; border-bottom: 1px solid #333; font-size: 0.8rem;">
                                [00:00:00] System started
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- MARKETPLACE -->
            <div class="page" id="pageMarketplace">
                <h2 class="page-title">Marketplace</h2>
                <div class="market-grid" id="marketplaceGrid">
                    <!-- Marketplace items will be loaded here -->
                </div>
            </div>

            <!-- ONLINE USERS -->
            <div class="page" id="pageOnlineUsers">
                <h2 class="page-title">Online Users</h2>
                <div class="card">
                    <div class="card-title">Currently Online</div>
                    <div class="card-content" id="onlineUsersList">
                        Loading online users...
                    </div>
                </div>
            </div>

            <!-- TOOLS -->
            <div class="page" id="pageTools">
                <h2 class="page-title">Tools</h2>
                <div class="market-grid">
                    <div class="market-item" onclick="showTool('calculator')">
                        <div style="text-align: center; margin-bottom: 0.5rem;">
                            <i class="fas fa-calculator" style="font-size: 1.5rem; color: #ff0000;"></i>
                        </div>
                        <div class="market-name">Calculator</div>
                    </div>
                    <div class="market-item" onclick="showTool('calendar')">
                        <div style="text-align: center; margin-bottom: 0.5rem;">
                            <i class="fas fa-calendar" style="font-size: 1.5rem; color: #ff0000;"></i>
                        </div>
                        <div class="market-name">Calendar</div>
                    </div>
                    <div class="market-item" onclick="showTool('notepad')">
                        <div style="text-align: center; margin-bottom: 0.5rem;">
                            <i class="fas fa-edit" style="font-size: 1.5rem; color: #ff0000;"></i>
                        </div>
                        <div class="market-name">Notepad</div>
                    </div>
                    <div class="market-item" onclick="showTool('converter')">
                        <div style="text-align: center; margin-bottom: 0.5rem;">
                            <i class="fas fa-exchange-alt" style="font-size: 1.5rem; color: #ff0000;"></i>
                        </div>
                        <div class="market-name">Converter</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- BOTTOM NAV -->
        <div class="nav-bottom">
            <div class="nav-item active" data-page="dashboard">
                <i class="fas fa-home"></i>
                <div>Home</div>
            </div>
            <div class="nav-item" data-page="chatGlobal">
                <i class="fas fa-comments"></i>
                <div>Chat</div>
            </div>
            <div class="nav-item" data-page="virtualPhone">
                <i class="fas fa-phone"></i>
                <div>Phone</div>
            </div>
            <div class="nav-item" data-page="marketplace">
                <i class="fas fa-store"></i>
                <div>Market</div>
            </div>
        </div>
    </div>

    <!-- NOTIFICATION MODAL -->
    <div class="modal" id="notifModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Notifications</h3>
                <button class="close-modal" onclick="closeModal('notifModal')">&times;</button>
            </div>
            <div id="notifList">
                <div style="text-align: center; padding: 1rem; color: #888;">
                    No notifications
                </div>
            </div>
        </div>
    </div>

    <!-- TOOL MODAL -->
    <div class="modal" id="toolModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="toolTitle">Tool</h3>
                <button class="close-modal" onclick="closeModal('toolModal')">&times;</button>
            </div>
            <div id="toolContent">
                <!-- Tool content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- FIREBASE & OTHER SCRIPTS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    
    <script>
        // =================== FIREBASE CONFIGURATION ===================
        const firebaseConfig = {
            apiKey: "AIzaSyBqEIaE2Av4EVVyoRDDLpGViPHoDWmTh1c",
            authDomain: "zaxs-f5306.firebaseapp.com",
            databaseURL: "https://zaxs-f5306-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "zaxs-f5306",
            storageBucket: "zaxs-f5306.firebasestorage.app",
            messagingSenderId: "582874980027",
            appId: "1:582874980027:web:16ed67ba4af5d8ed27539e"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // =================== SYSTEM VARIABLES ===================
        const systemUsers = {
            'test712': { password: '797978', role: 'admin' },
            'test790': { password: '891277', role: 'admin' },
            'test012': { password: '92576', role: 'reseller' },
            'Admin218': { password: '078962', role: 'admin' },
            'Rasya111': { password: 'Rasya12435', role: 'owner' },
            'userTest1': { password: '721', role: 'user' }
        };

        let currentUser = null;
        let currentPrivateChat = null;
        let notifications = [];
        let onlineUsers = {};
        let virtualPhoneNumber = '';
        let systemStartTime = Date.now();

        // =================== BOOTING SEQUENCE ===================
        const bootTexts = [
            "Loading system modules...",
            "Initializing security protocols...",
            "Connecting to database...",
            "Preparing user interface...",
            "System ready!"
        ];

        function startBooting() {
            let progress = 0;
            let textIndex = 0;
            
            const bootInterval = setInterval(() => {
                progress += 20;
                document.getElementById('bootFill').style.width = progress + '%';
                document.getElementById('bootText').textContent = bootTexts[textIndex];
                
                textIndex++;
                if (textIndex >= bootTexts.length) {
                    clearInterval(bootInterval);
                    setTimeout(() => {
                        document.getElementById('booting').style.display = 'none';
                        document.getElementById('loginScreen').style.display = 'flex';
                    }, 500);
                }
            }, 400);
        }

        // =================== LOGIN SYSTEM ===================
        document.getElementById('btnLogin').onclick = function() {
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value;
            
            if (!username || !password) {
                showLoginMessage('Please enter username and password', 'error');
                return;
            }
            
            if (systemUsers[username] && systemUsers[username].password === password) {
                loginSuccess(username, systemUsers[username]);
            } else {
                showLoginMessage('Invalid username or password', 'error');
            }
        };

        function loginSuccess(username, userData) {
            currentUser = {
                username: username,
                role: userData.role,
                nickname: username,
                virtualPhone: generateVirtualPhone()
            };
            
            showLoginMessage('Login successful! Loading system...', 'success');
            
            // Initialize Firebase and setup real-time features
            setTimeout(() => {
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('app').style.display = 'block';
                initializeDashboard();
                setupFirebaseListeners();
            }, 1000);
        }

        function showLoginMessage(message, type) {
            const msgElement = document.getElementById('loginMsg');
            msgElement.textContent = message;
            msgElement.style.color = type === 'error' ? '#ff5555' : '#00ff00';
        }

        // =================== VIRTUAL PHONE SYSTEM ===================
        function generateVirtualPhone() {
            const prefix = '62';
            const random = Math.floor(10000000000 + Math.random() * 90000000000);
            return prefix + random.toString().substring(0, 11);
        }

        document.getElementById('generatePhoneBtn').onclick = function() {
            virtualPhoneNumber = generateVirtualPhone();
            document.getElementById('virtualNumberDisplay').textContent = virtualPhoneNumber;
            if (currentUser) {
                currentUser.virtualPhone = virtualPhoneNumber;
                updateUserInfo();
            }
            toastr.success('New virtual phone number generated!');
            addSystemLog('Virtual phone number regenerated');
        };

        // =================== DASHBOARD INITIALIZATION ===================
        function initializeDashboard() {
            // Update user info
            document.getElementById('userRoleDisplay').textContent = currentUser.role.toUpperCase();
            updateUserInfo();
            
            // Generate initial virtual phone
            virtualPhoneNumber = currentUser.virtualPhone;
            document.getElementById('virtualNumberDisplay').textContent = virtualPhoneNumber;
            
            // Setup marketplace
            loadMarketplace();
            
            // Start system monitoring
            startSystemMonitoring();
            
            // Setup event listeners
            setupEventListeners();
            
            // Start time updates
            updateTime();
            setInterval(updateTime, 1000);
            
            // Update uptime
            setInterval(updateUptime, 60000);
        }

        function updateUserInfo() {
            const userInfo = document.getElementById('userInfo');
            if (userInfo && currentUser) {
                userInfo.innerHTML = `
                    <div><strong>Username:</strong> ${currentUser.username}</div>
                    <div><strong>Role:</strong> ${currentUser.role}</div>
                    <div><strong>Virtual Phone:</strong> ${currentUser.virtualPhone}</div>
                    <div><strong>Status:</strong> <span style="color: #00ff00;">Online</span></div>
                `;
            }
        }

        // =================== FIREBASE REAL-TIME SYSTEM ===================
        function setupFirebaseListeners() {
            if (!currentUser) return;
            
            // Update online status
            const userStatusRef = database.ref('onlineUsers/' + currentUser.username);
            userStatusRef.set({
                username: currentUser.username,
                role: currentUser.role,
                virtualPhone: currentUser.virtualPhone,
                lastSeen: Date.now()
            });
            
            // Remove on disconnect
            userStatusRef.onDisconnect().remove();
            
            // Listen for online users
            database.ref('onlineUsers').on('value', (snapshot) => {
                onlineUsers = snapshot.val() || {};
                updateOnlineUsersDisplay();
                updatePrivateUsersList();
            });
            
            // Listen for global chat messages
            database.ref('globalChat').limitToLast(50).on('value', (snapshot) => {
                const messages = snapshot.val();
                updateGlobalChat(messages);
            });
            
            // Listen for private messages
            if (currentPrivateChat) {
                listenToPrivateChat(currentPrivateChat);
            }
        }

        // =================== CHAT SYSTEM ===================
        // Global Chat
        document.getElementById('chatGlobalSend').onclick = sendGlobalMessage;
        document.getElementById('chatGlobalInput').onkeypress = function(e) {
            if (e.key === 'Enter') sendGlobalMessage();
        };

        function sendGlobalMessage() {
            const input = document.getElementById('chatGlobalInput');
            const message = input.value.trim();
            
            if (!message || !currentUser) return;
            
            const messageData = {
                sender: currentUser.username,
                senderPhone: currentUser.virtualPhone,
                message: message,
                timestamp: Date.now(),
                role: currentUser.role
            };
            
            database.ref('globalChat').push(messageData);
            input.value = '';
            
            // Add to system log
            addSystemLog(`Global message sent: ${message.substring(0, 30)}...`);
        }

        function updateGlobalChat(messages) {
            const container = document.getElementById('chatGlobalMessages');
            if (!container) return;
            
            container.innerHTML = '';
            if (!messages) return;
            
            Object.values(messages).forEach(msg => {
                const div = document.createElement('div');
                div.className = msg.sender === currentUser.username ? 'message sent' : 'message received';
                div.innerHTML = `
                    <div class="sender">${msg.sender} (${msg.senderPhone})</div>
                    ${msg.message}
                    <div class="time">${formatTime(msg.timestamp)}</div>
                `;
                container.appendChild(div);
            });
            
            // Scroll to bottom
            container.scrollTop = container.scrollHeight;
            
            // Update message count
            const messageCount = Object.keys(messages).length;
            document.getElementById('messageCount').textContent = messageCount;
            document.getElementById('chatOnlineCount').textContent = Object.keys(onlineUsers).length;
        }

        // Private Chat
        function updatePrivateUsersList() {
            const container = document.getElementById('privateUsersList');
            if (!container) return;
            
            container.innerHTML = '';
            Object.values(onlineUsers).forEach(user => {
                if (user.username === currentUser.username) return;
                
                const div = document.createElement('div');
                div.style.cssText = 'padding: 0.5rem; border-bottom: 1px solid #333; cursor: pointer;';
                div.onclick = () => startPrivateChat(user.username);
                div.innerHTML = `
                    <div style="font-weight: bold; color: #ff5555;">${user.username}</div>
                    <div style="font-size: 0.7rem; color: #aaa;">${user.role} | ${user.virtualPhone}</div>
                `;
                container.appendChild(div);
            });
        }

        function startPrivateChat(otherUser) {
            currentPrivateChat = otherUser;
            document.getElementById('privateChatTitle').textContent = `Chat with ${otherUser}`;
            document.getElementById('chatPrivateInput').disabled = false;
            document.getElementById('chatPrivateSend').disabled = false;
            document.getElementById('chatPrivateInput').placeholder = "Type message...";
            
            // Load chat history
            listenToPrivateChat(otherUser);
        }

        function listenToPrivateChat(otherUser) {
            const chatId = [currentUser.username, otherUser].sort().join('_');
            database.ref('privateChats/' + chatId).limitToLast(50).on('value', (snapshot) => {
                const messages = snapshot.val();
                updatePrivateChat(messages, otherUser);
            });
        }

        document.getElementById('chatPrivateSend').onclick = sendPrivateMessage;
        document.getElementById('chatPrivateInput').onkeypress = function(e) {
            if (e.key === 'Enter') sendPrivateMessage();
        };

        function sendPrivateMessage() {
            if (!currentPrivateChat) {
                toastr.warning('Select a user to chat with first');
                return;
            }
            
            const input = document.getElementById('chatPrivateInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            const chatId = [currentUser.username, currentPrivateChat].sort().join('_');
            const messageData = {
                sender: currentUser.username,
                senderPhone: currentUser.virtualPhone,
                receiver: currentPrivateChat,
                message: message,
                timestamp: Date.now()
            };
            
            database.ref('privateChats/' + chatId).push(messageData);
            input.value = '';
            
            addSystemLog(`Private message to ${currentPrivateChat}: ${message.substring(0, 30)}...`);
        }

        function updatePrivateChat(messages, otherUser) {
            const container = document.getElementById('chatPrivateMessages');
            if (!container) return;
            
            container.innerHTML = '';
            if (!messages) return;
            
            Object.values(messages).forEach(msg => {
                const isSender = msg.sender === currentUser.username;
                const div = document.createElement('div');
                div.className = isSender ? 'message sent' : 'message received';
                div.innerHTML = `
                    <div class="sender">${isSender ? 'You' : msg.sender} (${msg.senderPhone})</div>
                    ${msg.message}
                    <div class="time">${formatTime(msg.timestamp)}</div>
                `;
                container.appendChild(div);
            });
            
            container.scrollTop = container.scrollHeight;
        }

        // =================== SYSTEM MONITORING ===================
        function startSystemMonitoring() {
            // Update monitoring every 2 seconds
            setInterval(() => {
                updateSystemStats();
            }, 2000);
            
            // Initial update
            updateSystemStats();
        }

        function updateSystemStats() {
            // Simulate system stats (in real app, these would come from actual system)
            const cpu = Math.min(100, Math.floor(Math.random() * 40) + 20);
            const memory = Math.min(100, Math.floor(Math.random() * 50) + 30);
            const network = Math.floor(Math.random() * 1000) + 100;
            const storage = Math.min(100, Math.floor(Math.random() * 60) + 20);
            
            // Update CPU
            document.getElementById('cpuValue').textContent = cpu + '%';
            document.getElementById('cpuBar').style.width = cpu + '%';
            
            // Update Memory
            document.getElementById('memoryValue').textContent = memory + '%';
            document.getElementById('memoryBar').style.width = memory + '%';
            
            // Update Network
            document.getElementById('networkValue').textContent = network + ' KB/s';
            document.getElementById('networkBar').style.width = Math.min(100, network / 10) + '%';
            
            // Update Storage
            document.getElementById('storageValue').textContent = storage + '%';
            document.getElementById('storageBar').style.width = storage + '%';
        }

        function addSystemLog(message) {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${message}`;
            
            const logsContainer = document.getElementById('systemLogs');
            const logDiv = document.createElement('div');
            logDiv.style.cssText = 'padding: 0.3rem; border-bottom: 1px solid #333; font-size: 0.8rem;';
            logDiv.textContent = logEntry;
            
            logsContainer.insertBefore(logDiv, logsContainer.firstChild);
            
            // Keep only last 20 logs
            if (logsContainer.children.length > 20) {
                logsContainer.removeChild(logsContainer.lastChild);
            }
        }

        // =================== MARKETPLACE ===================
        function loadMarketplace() {
            const marketplaceItems = [
                { name: 'APK Bug 123 Hari', price: '40K', days: 123 },
                { name: 'APK Bug 60 Hari', price: '30K', days: 60 },
                { name: 'APK Bug 31 Hari', price: '21K', days: 31 },
                { name: 'APK Bug 1 Bulan', price: '60K', days: 30 },
                { name: 'APK Bug 2 Bulan', price: '110K', days: 60 },
                { name: 'APK Bug 5 Hari', price: '3K', days: 5 },
                { name: 'APK Bug 8 Hari', price: '5K', days: 8 },
                { name: 'APK Bug 10 Hari', price: '7K', days: 10 },
                { name: 'APK Bug 41 Hari', price: '34K', days: 41 },
                { name: 'APK Bug 230 Hari', price: '53K', days: 230 }
            ];
            
            const container = document.getElementById('marketplaceGrid');
            container.innerHTML = '';
            
            marketplaceItems.forEach(item => {
                const div = document.createElement('div');
                div.className = 'market-item';
                div.onclick = () => purchaseItem(item);
                div.innerHTML = `
                    <div class="market-name">${item.name}</div>
                    <div class="market-price">${item.price}</div>
                    <div class="market-days">${item.days} days</div>
                `;
                container.appendChild(div);
            });
        }

        function purchaseItem(item) {
            if (confirm(`Purchase ${item.name} for ${item.price}?`)) {
                toastr.success(`Successfully purchased ${item.name}!`);
                addSystemLog(`Purchased: ${item.name} for ${item.price}`);
                
                // In real app, you would process payment here
            }
        }

        // =================== TOOLS ===================
        function showTool(toolName) {
            const toolModal = document.getElementById('toolModal');
            const toolTitle = document.getElementById('toolTitle');
            const toolContent = document.getElementById('toolContent');
            
            switch(toolName) {
                case 'calculator':
                    toolTitle.textContent = 'Calculator';
                    toolContent.innerHTML = `
                        <div style="background: #222; padding: 1rem; border-radius: 5px; font-family: monospace;">
                            <input type="text" id="calcInput" style="width: 100%; padding: 0.5rem; margin-bottom: 0.5rem; font-size: 1.2rem; text-align: right;" readonly value="0">
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.3rem;">
                                <button class="btn" onclick="calcInput('7')" style="padding: 0.5rem;">7</button>
                                <button class="btn" onclick="calcInput('8')" style="padding: 0.5rem;">8</button>
                                <button class="btn" onclick="calcInput('9')" style="padding: 0.5rem;">9</button>
                                <button class="btn" onclick="calcInput('/')" style="padding: 0.5rem;">/</button>
                                <button class="btn" onclick="calcInput('4')" style="padding: 0.5rem;">4</button>
                                <button class="btn" onclick="calcInput('5')" style="padding: 0.5rem;">5</button>
                                <button class="btn" onclick="calcInput('6')" style="padding: 0.5rem;">6</button>
                                <button class="btn" onclick="calcInput('*')" style="padding: 0.5rem;"></button>
                                <button class="btn" onclick="calcInput('1')" style="padding: 0.5rem;">1</button>
                                <button class="btn" onclick="calcInput('2')" style="padding: 0.5rem;">2</button>
                                <button class="btn" onclick="calcInput('3')" style="padding: 0.5rem;">3</button>
                                <button class="btn" onclick="calcInput('-')" style="padding: 0.5rem;">-</button>
                                <button class="btn" onclick="calcInput('0')" style="padding: 0.5rem;">0</button>
                                <button class="btn" onclick="calcInput('.')" style="padding: 0.5rem;">.</button>
                                <button class="btn" onclick="calcCalculate()" style="padding: 0.5rem;">=</button>
                                <button class="btn" onclick="calcInput('+')" style="padding: 0.5rem;">+</button>
                            </div>
                            <button class="btn mt-1" onclick="calcClear()" style="padding: 0.5rem;">Clear</button>
                        </div>
                    `;
                    break;
                    
                case 'calendar':
                    toolTitle.textContent = 'Calendar';
                    const now = new Date();
                    toolContent.innerHTML = `
                        <div style="text-align: center; padding: 1rem;">
                            <div style="font-size: 1.5rem; color: #ff0000; margin-bottom: 0.5rem;">
                                ${now.toLocaleDateString('en-US', { weekday: 'long' })}
                            </div>
                            <div style="font-size: 2rem; color: #fff; margin-bottom: 0.5rem;">
                                ${now.getDate()}
                            </div>
                            <div style="font-size: 1rem; color: #aaa;">
                                ${now.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'notepad':
                    toolTitle.textContent = 'Notepad';
                    toolContent.innerHTML = `
                        <textarea id="notepadText" style="width: 100%; height: 200px; padding: 0.5rem; background: #222; color: #fff; border: 1px solid #ff0000; border-radius: 5px;"></textarea>
                        <div class="mt-1" style="display: flex; gap: 0.5rem;">
                            <button class="btn" onclick="saveNotepad()" style="flex: 1; padding: 0.5rem;">Save</button>
                            <button class="btn" onclick="loadNotepad()" style="flex: 1; padding: 0.5rem;">Load</button>
                            <button class="btn" onclick="clearNotepad()" style="flex: 1; padding: 0.5rem;">Clear</button>
                        </div>
                    `;
                    break;
                    
                case 'converter':
                    toolTitle.textContent = 'Unit Converter';
                    toolContent.innerHTML = `
                        <div style="margin-bottom: 1rem;">
                            <input type="number" id="convertValue" placeholder="Value" style="width: 100%; padding: 0.5rem; background: #222; color: #fff; border: 1px solid #ff0000; border-radius: 5px;">
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; margin-bottom: 1rem;">
                            <select id="convertFrom" style="padding: 0.5rem; background: #222; color: #fff; border: 1px solid #ff0000; border-radius: 5px;">
                                <option value="meter">Meter</option>
                                <option value="kilometer">Kilometer</option>
                                <option value="centimeter">Centimeter</option>
                                <option value="inch">Inch</option>
                            </select>
                            <select id="convertTo" style="padding: 0.5rem; background: #222; color: #fff; border: 1px solid #ff0000; border-radius: 5px;">
                                <option value="meter">Meter</option>
                                <option value="kilometer">Kilometer</option>
                                <option value="centimeter">Centimeter</option>
                                <option value="inch">Inch</option>
                            </select>
                        </div>
                        <button class="btn" onclick="convertUnits()" style="width: 100%; padding: 0.5rem;">Convert</button>
                        <div id="convertResult" class="mt-1" style="padding: 1rem; background: #222; border-radius: 5px; text-align: center; font-size: 1.2rem;"></div>
                    `;
                    break;
            }
            
            toolModal.style.display = 'flex';
        }

        // Calculator functions
        function calcInput(value) {
            const input = document.getElementById('calcInput');
            if (input.value === '0') input.value = value;
            else input.value += value;
        }

        function calcCalculate() {
            const input = document.getElementById('calcInput');
            try {
                input.value = eval(input.value.replace('', '*'));
            } catch {
                input.value = 'Error';
            }
        }

        function calcClear() {
            document.getElementById('calcInput').value = '0';
        }

        // Notepad functions
        function saveNotepad() {
            const text = document.getElementById('notepadText').value;
            localStorage.setItem('zaxs_notepad', text);
            toastr.success('Notepad saved!');
        }

        function loadNotepad() {
            const text = localStorage.getItem('zaxs_notepad') || '';
            document.getElementById('notepadText').value = text;
            toastr.success('Notepad loaded!');
        }

        function clearNotepad() {
            document.getElementById('notepadText').value = '';
            toastr.success('Notepad cleared!');
        }

        // Converter functions
        function convertUnits() {
            const value = parseFloat(document.getElementById('convertValue').value);
            const from = document.getElementById('convertFrom').value;
            const to = document.getElementById('convertTo').value;
            
            if (isNaN(value)) {
                toastr.error('Please enter a valid number');
                return;
            }
            
            // Conversion rates
            const rates = {
                meter: 1,
                kilometer: 0.001,
                centimeter: 100,
                inch: 39.3701
            };
            
            const result = value * (rates[to] / rates[from]);
            document.getElementById('convertResult').innerHTML = `
                ${value} ${from} = <span style="color: #ff0000;">${result.toFixed(4)}</span> ${to}
            `;
        }

        // =================== UTILITY FUNCTIONS ===================
        function formatTime(timestamp) {
            const date = new Date(timestamp);
            return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }

        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString();
            document.getElementById('headerTime').textContent = timeString;
        }

        function updateUptime() {
            const uptime = Date.now() - systemStartTime;
            const hours = Math.floor(uptime / 3600000);
            const minutes = Math.floor((uptime % 3600000) / 60000);
            document.getElementById('uptime').textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
        }

        function updateOnlineUsersDisplay() {
            const onlineCount = Object.keys(onlineUsers).length;
            document.getElementById('onlineCount').textContent = onlineCount;
            
            // Update online users list
            const container = document.getElementById('onlineUsersList');
            if (container) {
                container.innerHTML = '';
                Object.values(onlineUsers).forEach(user => {
                    const div = document.createElement('div');
                    div.style.cssText = 'padding: 0.5rem; border-bottom: 1px solid #333;';
                    div.innerHTML = `
                        <div style="color: #ff5555; font-weight: bold;">${user.username}</div>
                        <div style="font-size: 0.8rem; color: #aaa;">
                            Role: ${user.role} | Phone: ${user.virtualPhone}
                        </div>
                    `;
                    container.appendChild(div);
                });
            }
        }

        function showPage(pageId) {
            // Update bottom nav
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Find and activate corresponding nav item
            const navItem = document.querySelector(`.nav-item[data-page="${pageId}"]`);
            if (navItem) navItem.classList.add('active');
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            const page = document.getElementById('page' + pageId.charAt(0).toUpperCase() + pageId.slice(1));
            if (page) {
                page.classList.add('active');
                
                // Special handling for certain pages
                if (pageId === 'systemMonitor') {
                    updateSystemStats();
                } else if (pageId === 'onlineUsers') {
                    updateOnlineUsersDisplay();
                }
            }
            
            // Close sidebar if open
            document.getElementById('sidebar').classList.remove('open');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // =================== EVENT LISTENERS SETUP ===================
        function setupEventListeners() {
            // Menu toggle
            document.getElementById('menuToggle').onclick = function() {
                document.getElementById('sidebar').classList.toggle('open');
            };
            
            // Sidebar navigation
            document.querySelectorAll('.sidebar-item').forEach(item => {
                if (item.id !== 'logoutBtn') {
                    item.onclick = function() {
                        const page = this.getAttribute('data-page');
                        if (page) showPage(page);
                    };
                }
            });
            
            // Bottom nav
            document.querySelectorAll('.nav-item').forEach(item => {
                item.onclick = function() {
                    const page = this.getAttribute('data-page');
                    showPage(page);
                };
            });
            
            // Logout
            document.getElementById('logoutBtn').onclick = logout;
            
            // Notifications
            document.getElementById('notifToggle').onclick = function() {
                document.getElementById('notifModal').style.display = 'flex';
            };
            
            // User profile
            document.getElementById('userToggle').onclick = showProfile;
            
            // System info link
            document.getElementById('showInfo').onclick = function(e) {
                e.preventDefault();
                showSystemInfo();
            };
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                // Remove from online users
                if (currentUser) {
                    database.ref('onlineUsers/' + currentUser.username).remove();
                }
                
                // Reset system
                currentUser = null;
                document.getElementById('app').style.display = 'none';
                document.getElementById('loginScreen').style.display = 'flex';
                document.getElementById('loginUsername').value = '';
                document.getElementById('loginPassword').value = '';
                document.getElementById('loginMsg').textContent = '';
            }
        }

        function showProfile() {
            if (!currentUser) return;
            
            alert(`User Profile:\n\nUsername: ${currentUser.username}\nRole: ${currentUser.role}\nVirtual Phone: ${currentUser.virtualPhone}\nStatus: Online`);
        }

        function showSystemInfo() {
            alert(`ZAXS PROTOCOL v4.0\n\nFeatures:\n- Real-time Chat System\n- Virtual Phone Numbers\n- System Monitoring\n- Marketplace\n- Online User Tracking\n- Firebase Integration\n\nAll systems operational.`);
        }

        // =================== INITIALIZE SYSTEM ===================
        window.onload = function() {
            // Configure toastr
            toastr.options = {
                positionClass: 'toast-top-right',
                progressBar: true,
                timeOut: 3000,
                closeButton: true
            };
            
            // Start booting sequence
            startBooting();
            
            // Add system startup log
            setTimeout(() => {
                addSystemLog('System initialized successfully');
                addSystemLog('Firebase connected');
                addSystemLog('Real-time systems active');
            }, 2000);
        };
    </script>
</body>
</html>